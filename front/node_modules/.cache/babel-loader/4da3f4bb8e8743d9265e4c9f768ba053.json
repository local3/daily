{"ast":null,"code":"var _jsxFileName = \"/app/src/pages/UserEdit.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext, useReducer } from 'react';\nimport { Link } from 'react-router-dom';\nimport Header from '../components/Header';\nimport Footer from '../components/Footer';\nimport axios from 'axios';\nimport { AuthContext } from \"../Auth\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction UserEdit() {\n  _s();\n\n  const auth = useContext(AuthContext);\n  const initSession = {\n    email: '',\n    password: ''\n  };\n  const initUser = {\n    email: '',\n    password: '',\n    passwordConfirmation: '',\n    languageId: auth.currentUser.language_id ? auth.currentUser.language_id : 0\n  };\n  console.log(auth);\n  console.log(initUser);\n  const [user, setUser] = useState(initUser);\n  const [session, setSession] = useState(initSession);\n  const [languages, setLanguages] = useState([]);\n  const [errorMsg, setErrorMsg] = useReducer(reducer, \"\");\n\n  const componentDidMount = () => {\n    axios.get(`/languages`).then(res => {\n      const languages = res.data;\n      setLanguages(languages); // console.log(languages)\n    });\n  };\n\n  const initUserData = () => {\n    setUser({ ...user,\n      languageId: auth.currentUser.language_id\n    });\n  };\n\n  useEffect(componentDidMount, []);\n  useEffect(initUserData, [auth]);\n\n  const handleChangeSessionEmail = e => {\n    setSession({ ...session,\n      email: e.target.value\n    });\n  };\n\n  const handleChangeSessionPassword = e => {\n    setSession({ ...session,\n      password: e.target.value\n    });\n  };\n\n  const handleChangeEmail = e => {\n    setUser({ ...user,\n      email: e.target.value\n    });\n  };\n\n  const handleChangePassword = e => {\n    setUser({ ...user,\n      password: e.target.value\n    });\n  };\n\n  const handleChangePasswordConfirmation = e => {\n    setUser({ ...user,\n      passwordConfirmation: e.target.value\n    });\n  };\n\n  const handleChangeLanguage = e => {\n    setUser({ ...user,\n      languageId: e.target.value\n    });\n  };\n\n  const handleClickUpdate = (columnNames, e) => {\n    e.preventDefault();\n\n    const reducer = (beforeResult, columnName) => {\n      beforeResult[`${columnName}`] = user[columnName];\n      console.log(beforeResult);\n      return beforeResult;\n    };\n\n    console.log(columnNames);\n    const userParams = columnNames.reduce(reducer, {});\n    console.log(userParams);\n    axios.patch(`/users/update`, {\n      session: session,\n      user: userParams\n    }).then(res => {\n      console.log(res);\n    }).catch(res => {\n      console.log(res);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(ErrorMsg, {\n        errorMsg: errorMsg\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"\\u672C\\u4EBA\\u78BA\\u8A8D\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\\uFF1A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"email\",\n        onChange: handleChangeSessionEmail\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\\uFF1A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"password\",\n        type: \"password\",\n        onChange: handleChangeSessionPassword\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"\\u5909\\u66F4\\u7528\\u30D5\\u30A9\\u30FC\\u30E0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"\\u5909\\u66F4\\u5F8C\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\\uFF1A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"email\",\n        onChange: handleChangeEmail\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: e => {\n          handleClickUpdate([\"email\"], e);\n        },\n        children: \"\\u5909\\u66F4\\u3059\\u308B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"\\u5909\\u66F4\\u5F8C\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\\uFF1A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"password\",\n        type: \"password\",\n        onChange: handleChangePassword\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\\u78BA\\u8A8D\\u7528\\uFF1A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"password_confirmation\",\n        type: \"password\",\n        onChange: handleChangePasswordConfirmation\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: e => handleClickUpdate([\"password\", \"passwordConfirmation\"], e),\n        children: \"\\u5909\\u66F4\\u3059\\u308B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }, this), console.log(auth.currentUser.language_id), console.log(typeof auth.currentUser.language_id), console.log(user), console.log(languages[0]), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"\\u8A00\\u8A9E\\u9078\\u629E\\uFF1A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        onChange: handleChangeLanguage,\n        value: user.languageId,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: 0,\n          disabled: true\n        }, 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this), languages.map(language => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: Number(language.id),\n          children: language.name\n        }, Number(language.id), false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: e => handleClickUpdate([\"languageId\"], e),\n        children: \"\\u5909\\u66F4\\u3059\\u308B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(UserEdit, \"OgopDU2TjBrVQm5P+Vj6pnCTOOw=\");\n\n_c = UserEdit;\nexport default UserEdit;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserEdit\");","map":{"version":3,"sources":["/app/src/pages/UserEdit.js"],"names":["React","useState","useEffect","useContext","useReducer","Link","Header","Footer","axios","AuthContext","UserEdit","auth","initSession","email","password","initUser","passwordConfirmation","languageId","currentUser","language_id","console","log","user","setUser","session","setSession","languages","setLanguages","errorMsg","setErrorMsg","reducer","componentDidMount","get","then","res","data","initUserData","handleChangeSessionEmail","e","target","value","handleChangeSessionPassword","handleChangeEmail","handleChangePassword","handleChangePasswordConfirmation","handleChangeLanguage","handleClickUpdate","columnNames","preventDefault","beforeResult","columnName","userParams","reduce","patch","catch","map","language","Number","id","name"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useContext, useReducer} from 'react'\nimport { Link } from 'react-router-dom'\nimport Header from '../components/Header'\nimport Footer from '../components/Footer'\nimport axios from 'axios';\nimport { AuthContext } from \"../Auth\";\n\nfunction UserEdit() {\n  const auth = useContext(AuthContext);\n  const initSession =\n    {\n      email: '',\n      password: ''\n    }\n  const initUser =\n    {\n      email: '',\n      password: '',\n      passwordConfirmation: '',\n      languageId: auth.currentUser.language_id ? auth.currentUser.language_id : 0\n    }\n  console.log(auth)\n  console.log(initUser)\n  const [user, setUser] = useState(initUser);\n  const [session, setSession] = useState(initSession);\n  const [languages, setLanguages] = useState([]);\n  const [errorMsg, setErrorMsg] = useReducer(reducer, \"\");\n\n  const componentDidMount = () => {\n    axios.get(`/languages`)\n      .then(res => {\n        const languages = res.data;\n        setLanguages(languages);\n        // console.log(languages)\n      })\n  }\n\n  const initUserData = () => {\n    setUser({\n      ...user,\n      languageId: auth.currentUser.language_id\n    })\n  }\n\n  useEffect(componentDidMount, [])\n  useEffect(initUserData, [auth])\n\n  const handleChangeSessionEmail = (e) => {\n    setSession(\n      {\n        ...session,\n        email: e.target.value\n      }\n    );\n  };\n\n  const handleChangeSessionPassword = (e) => {\n    setSession(\n      {\n        ...session,\n        password: e.target.value\n      }\n    );\n  };\n\n  const handleChangeEmail = (e) => {\n    setUser(\n      {\n\t\t\t\t...user,\n\t\t\t\temail: e.target.value\n\t\t\t}\n    );\n  };\n\n  const handleChangePassword = (e) => {\n    setUser(\n\t\t\t{\n\t\t\t\t...user,\n\t\t\t\tpassword: e.target.value\n\t\t\t}\n    );\n  };\n\n  const handleChangePasswordConfirmation = (e) => {\n    setUser(\n\t\t\t{\n\t\t\t\t...user,\n\t\t\t\tpasswordConfirmation: e.target.value\n\t\t\t}\n    );\n  };\n\n  const handleChangeLanguage = (e) => {\n    setUser(\n      {\n        ...user,\n        languageId: e.target.value\n      }\n    );\n  };\n\n  \n  const handleClickUpdate = (columnNames, e) => {\n    e.preventDefault();\n    const reducer = (beforeResult, columnName) => {\n      beforeResult[`${columnName}`] = user[columnName]\n      console.log(beforeResult)\n      return beforeResult\n    };\n    console.log(columnNames)\n    const userParams = columnNames.reduce(reducer, {})\n    console.log(userParams)\n    axios.patch(`/users/update`, {\n      session: session, \n      user: userParams\n    })\n      .then(res => {\n        console.log(res)\n      })\n\n      .catch(res => {\n        console.log(res)\n      })\n  };\n\n  return(\n    <>\n      <div>\n          <ErrorMsg errorMsg={errorMsg} />\n      </div>\n      <form>\n        <div>本人確認</div>\n        <label>メールアドレス：</label>\n        <input type=\"text\"\n          name=\"email\"\n          onChange={handleChangeSessionEmail}\n        />\n\n        <br/>\n\n        <label>パスワード：</label>\n        <input type=\"text\"\n          name=\"password\"\n          type=\"password\"\n          onChange={handleChangeSessionPassword}\n        />\n\n        <br/>\n        <br/>\n\n        <div>変更用フォーム</div>\n        <label>変更後メールアドレス：</label>\n        <input type=\"text\"\n          name=\"email\"\n          onChange={handleChangeEmail}\n        />\n        <button onClick={(e) => {handleClickUpdate([\"email\"], e)}}>変更する</button>\n\n        <br/>\n        <br/>\n\n        <label>変更後パスワード：</label>\n        <input type=\"text\"\n          name=\"password\"\n          type=\"password\"\n          onChange={handleChangePassword}\n        />\n        \n        <br/>\n\n        <label>パスワード確認用：</label>\n        <input type=\"text\"\n          name=\"password_confirmation\"\n          type=\"password\"\n          onChange={handleChangePasswordConfirmation}\n        />\n        <button onClick={(e) => handleClickUpdate([\"password\", \"passwordConfirmation\"], e)}>変更する</button>\n\n        <br/>\n        <br/>\n\n        {console.log(auth.currentUser.language_id)}\n        {console.log(typeof(auth.currentUser.language_id))}\n        {console.log(user)}\n        {console.log(languages[0])}\n        <label>言語選択：</label>\n        {/* <select onChange={handleChangeLanguage} defaultValue={auth.currentUser.language_id ? auth.currentUser.language_id : 3}>\n          {languages.map(language => \n            <option key={Number(language.id)} value={Number(language.id)}>\n              {language.name}\n            </option>)\n          }\n        </select> */}\n        <select onChange={handleChangeLanguage} value={user.languageId}>\n          <option key={0} value={0} disabled></option>\n          {languages.map(language => \n            <option key={Number(language.id)} value={Number(language.id)}>\n              {language.name}\n            </option>)\n          }\n        </select>\n        <button onClick={(e) => handleClickUpdate([\"languageId\"], e)}>変更する</button>\n\n      </form>\n    </>\n  )\n}\nexport default UserEdit;"]},"metadata":{},"sourceType":"module"}