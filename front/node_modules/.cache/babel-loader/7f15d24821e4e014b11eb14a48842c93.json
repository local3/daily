{"ast":null,"code":"var _jsxFileName = \"/app/src/pages/UserEdit.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport { Link } from 'react-router-dom';\nimport Header from '../components/Header';\nimport Footer from '../components/Footer';\nimport axios from 'axios';\nimport { AuthContext } from \"../Auth\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction UserEdit() {\n  _s();\n\n  const initSession = {\n    email: '',\n    password: ''\n  };\n  const initUser = {\n    email: '',\n    password: '',\n    passwordConfirmation: '',\n    languageId: ''\n  };\n  const [user, setUser] = useState(initUser);\n  const [session, setSession] = useState(initSession);\n  const [languages, setLanguages] = useState([]);\n\n  const componentDidMount = () => {\n    axios.get(`/languages`).then(res => {\n      const languages = res.data;\n      setLanguages(languages); // console.log(languages)\n    });\n  };\n\n  useEffect(componentDidMount, []);\n\n  const handleChangeSessionEmail = e => {\n    setSession({ ...session,\n      email: e.target.value\n    });\n  };\n\n  const handleChangeEmail = e => {\n    setUser({ ...user,\n      email: e.target.value\n    });\n  };\n\n  const handleChangePassword = e => {\n    setUser({ ...user,\n      password: e.target.value\n    });\n  };\n\n  const handleChangePasswordConfirmation = e => {\n    setUser({ ...user,\n      passwordConfirmation: e.target.value\n    });\n  };\n\n  const handleChangeLanguage = e => {\n    setUser({ ...user,\n      languageId: e.target.value\n    });\n  };\n\n  const handleClickUpdate = columnNames => {\n    const userParams = columnNames.reduce((beforeResult, columnName) => {\n      beforeResult[`${columnName}`] = user[columnName];\n      return beforeResult;\n    }, {});\n    axios.patch(`/users`, {\n      session: session,\n      user: userParams\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u672C\\u4EBA\\u78BA\\u8A8D\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\\uFF1A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"email\",\n        onChange: handleChangeEmail\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleClickUpdate(\"email\"),\n        children: \"\\u5909\\u66F4\\u3059\\u308B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\\uFF1A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"password\",\n        type: \"password\",\n        onChange: handle\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"\\u5909\\u66F4\\u5F8C\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\\uFF1A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"email\",\n        onChange: handleChangeEmail\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleClickUpdate(\"email\"),\n        children: \"\\u5909\\u66F4\\u3059\\u308B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"\\u5909\\u66F4\\u5F8C\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\\uFF1A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"password\",\n        type: \"password\",\n        onChange: handleChangePassword\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\\u78BA\\u8A8D\\u7528\\uFF1A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"password_confirmation\",\n        type: \"password\",\n        onChange: handleChangePasswordConfirmation\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleClickUpdate(\"password\"),\n        children: \"\\u5909\\u66F4\\u3059\\u308B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"\\u8A00\\u8A9E\\u9078\\u629E\\uFF1A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        onChange: handleChangeLanguage,\n        children: languages.map(language => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: language.id,\n          selected: auth.currentUser.language_id === language.id ? true : false,\n          children: language.name\n        }, language.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleClickUpdate(\"languageId\"),\n        children: \"\\u5909\\u66F4\\u3059\\u308B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(UserEdit, \"lMZGATWZUYXDeKoC6C0p1Mf+ZXg=\");\n\n_c = UserEdit;\nexport default UserEdit;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserEdit\");","map":{"version":3,"sources":["/app/src/pages/UserEdit.js"],"names":["React","useState","useEffect","useContext","Link","Header","Footer","axios","AuthContext","UserEdit","initSession","email","password","initUser","passwordConfirmation","languageId","user","setUser","session","setSession","languages","setLanguages","componentDidMount","get","then","res","data","handleChangeSessionEmail","e","target","value","handleChangeEmail","handleChangePassword","handleChangePasswordConfirmation","handleChangeLanguage","handleClickUpdate","columnNames","userParams","reduce","beforeResult","columnName","patch","handleSubmit","handle","map","language","id","auth","currentUser","language_id","name"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,EAAoCC,UAApC,QAAqD,OAArD;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,SAA5B;;;;AAEA,SAASC,QAAT,GAAoB;AAAA;;AAClB,QAAMC,WAAW,GACf;AACEC,IAAAA,KAAK,EAAE,EADT;AAEEC,IAAAA,QAAQ,EAAE;AAFZ,GADF;AAKA,QAAMC,QAAQ,GACZ;AACEF,IAAAA,KAAK,EAAE,EADT;AAEEC,IAAAA,QAAQ,EAAE,EAFZ;AAGEE,IAAAA,oBAAoB,EAAE,EAHxB;AAIEC,IAAAA,UAAU,EAAE;AAJd,GADF;AAOA,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBhB,QAAQ,CAACY,QAAD,CAAhC;AACA,QAAM,CAACK,OAAD,EAAUC,UAAV,IAAwBlB,QAAQ,CAACS,WAAD,CAAtC;AACA,QAAM,CAACU,SAAD,EAAYC,YAAZ,IAA4BpB,QAAQ,CAAC,EAAD,CAA1C;;AAEA,QAAMqB,iBAAiB,GAAG,MAAM;AAC9Bf,IAAAA,KAAK,CAACgB,GAAN,CAAW,YAAX,EACGC,IADH,CACQC,GAAG,IAAI;AACX,YAAML,SAAS,GAAGK,GAAG,CAACC,IAAtB;AACAL,MAAAA,YAAY,CAACD,SAAD,CAAZ,CAFW,CAGX;AACD,KALH;AAMD,GAPD;;AASAlB,EAAAA,SAAS,CAACoB,iBAAD,EAAoB,EAApB,CAAT;;AAEA,QAAMK,wBAAwB,GAAIC,CAAD,IAAO;AACtCT,IAAAA,UAAU,CACR,EACE,GAAGD,OADL;AAEEP,MAAAA,KAAK,EAAEiB,CAAC,CAACC,MAAF,CAASC;AAFlB,KADQ,CAAV;AAMD,GAPD;;AASA,QAAMC,iBAAiB,GAAIH,CAAD,IAAO;AAC/BX,IAAAA,OAAO,CACL,EACF,GAAGD,IADD;AAEFL,MAAAA,KAAK,EAAEiB,CAAC,CAACC,MAAF,CAASC;AAFd,KADK,CAAP;AAMD,GAPD;;AASA,QAAME,oBAAoB,GAAIJ,CAAD,IAAO;AAClCX,IAAAA,OAAO,CACR,EACC,GAAGD,IADJ;AAECJ,MAAAA,QAAQ,EAAEgB,CAAC,CAACC,MAAF,CAASC;AAFpB,KADQ,CAAP;AAMD,GAPD;;AASA,QAAMG,gCAAgC,GAAIL,CAAD,IAAO;AAC9CX,IAAAA,OAAO,CACR,EACC,GAAGD,IADJ;AAECF,MAAAA,oBAAoB,EAAEc,CAAC,CAACC,MAAF,CAASC;AAFhC,KADQ,CAAP;AAMD,GAPD;;AASA,QAAMI,oBAAoB,GAAIN,CAAD,IAAO;AAClCX,IAAAA,OAAO,CACL,EACE,GAAGD,IADL;AAEED,MAAAA,UAAU,EAAEa,CAAC,CAACC,MAAF,CAASC;AAFvB,KADK,CAAP;AAMD,GAPD;;AAUA,QAAMK,iBAAiB,GAAIC,WAAD,IAAiB;AACzC,UAAMC,UAAU,GAAGD,WAAW,CAACE,MAAZ,CAAmB,CAACC,YAAD,EAAeC,UAAf,KAA8B;AAClED,MAAAA,YAAY,CAAE,GAAEC,UAAW,EAAf,CAAZ,GAAgCxB,IAAI,CAACwB,UAAD,CAApC;AACA,aAAOD,YAAP;AACD,KAHkB,EAGhB,EAHgB,CAAnB;AAIAhC,IAAAA,KAAK,CAACkC,KAAN,CAAa,QAAb,EAAsB;AACpBvB,MAAAA,OAAO,EAAEA,OADW;AAEpBF,MAAAA,IAAI,EAAEqB;AAFc,KAAtB;AAID,GATD;;AAWA,sBACE;AAAA,2BACE;AAAM,MAAA,QAAQ,EAAEK,YAAhB;AAAA,8BACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADA,eAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFA,eAGE;AAAO,QAAA,IAAI,EAAC,MAAZ;AACE,QAAA,IAAI,EAAC,OADP;AAEE,QAAA,QAAQ,EAAEX;AAFZ;AAAA;AAAA;AAAA;AAAA,cAHF,eAOE;AAAQ,QAAA,OAAO,EAAEI,iBAAiB,CAAC,OAAD,CAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAPF,eASE;AAAA;AAAA;AAAA;AAAA,cATF,eAWE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAXF,eAYE;AAAO,QAAA,IAAI,EAAC,MAAZ;AACE,QAAA,IAAI,EAAC,UADP;AAEE,QAAA,IAAI,EAAC,UAFP;AAGE,QAAA,QAAQ,EAAEQ;AAHZ;AAAA;AAAA;AAAA;AAAA,cAZF,eAkBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAlBF,eAmBE;AAAO,QAAA,IAAI,EAAC,MAAZ;AACE,QAAA,IAAI,EAAC,OADP;AAEE,QAAA,QAAQ,EAAEZ;AAFZ;AAAA;AAAA;AAAA;AAAA,cAnBF,eAuBE;AAAQ,QAAA,OAAO,EAAEI,iBAAiB,CAAC,OAAD,CAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAvBF,eAyBE;AAAA;AAAA;AAAA;AAAA,cAzBF,eA2BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cA3BF,eA4BE;AAAO,QAAA,IAAI,EAAC,MAAZ;AACE,QAAA,IAAI,EAAC,UADP;AAEE,QAAA,IAAI,EAAC,UAFP;AAGE,QAAA,QAAQ,EAAEH;AAHZ;AAAA;AAAA;AAAA;AAAA,cA5BF,eAkCE;AAAA;AAAA;AAAA;AAAA,cAlCF,eAoCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cApCF,eAqCE;AAAO,QAAA,IAAI,EAAC,MAAZ;AACE,QAAA,IAAI,EAAC,uBADP;AAEE,QAAA,IAAI,EAAC,UAFP;AAGE,QAAA,QAAQ,EAAEC;AAHZ;AAAA;AAAA;AAAA;AAAA,cArCF,eA0CE;AAAQ,QAAA,OAAO,EAAEE,iBAAiB,CAAC,UAAD,CAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cA1CF,eA6CE;AAAA;AAAA;AAAA;AAAA,cA7CF,eA+CE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cA/CF,eAgDE;AAAQ,QAAA,QAAQ,EAAED,oBAAlB;AAAA,kBACGd,SAAS,CAACwB,GAAV,CAAcC,QAAQ,iBACrB;AAA0B,UAAA,KAAK,EAAEA,QAAQ,CAACC,EAA1C;AAA8C,UAAA,QAAQ,EAAEC,IAAI,CAACC,WAAL,CAAiBC,WAAjB,KAAiCJ,QAAQ,CAACC,EAA1C,GAA+C,IAA/C,GAAsD,KAA9G;AAAA,oBACGD,QAAQ,CAACK;AADZ,WAAaL,QAAQ,CAACC,EAAtB;AAAA;AAAA;AAAA;AAAA,gBADD;AADH;AAAA;AAAA;AAAA;AAAA,cAhDF,eAuDE;AAAQ,QAAA,OAAO,EAAEX,iBAAiB,CAAC,YAAD,CAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAvDF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF,mBADF;AA8DD;;GAnJQ1B,Q;;KAAAA,Q;AAoJT,eAAeA,QAAf","sourcesContent":["import React, {useState, useEffect, useContext} from 'react'\nimport { Link } from 'react-router-dom'\nimport Header from '../components/Header'\nimport Footer from '../components/Footer'\nimport axios from 'axios';\nimport { AuthContext } from \"../Auth\";\n\nfunction UserEdit() {\n  const initSession =\n    {\n      email: '',\n      password: ''\n    }\n  const initUser =\n    {\n      email: '',\n      password: '',\n      passwordConfirmation: '',\n      languageId: ''\n    }\n  const [user, setUser] = useState(initUser);\n  const [session, setSession] = useState(initSession);\n  const [languages, setLanguages] = useState([]);\n\n  const componentDidMount = () => {\n    axios.get(`/languages`)\n      .then(res => {\n        const languages = res.data;\n        setLanguages(languages);\n        // console.log(languages)\n      })\n  }\n\n  useEffect(componentDidMount, [])\n\n  const handleChangeSessionEmail = (e) => {\n    setSession(\n      {\n        ...session,\n        email: e.target.value\n      }\n    )\n  };\n\n  const handleChangeEmail = (e) => {\n    setUser(\n      {\n\t\t\t\t...user,\n\t\t\t\temail: e.target.value\n\t\t\t}\n    );\n  };\n\n  const handleChangePassword = (e) => {\n    setUser(\n\t\t\t{\n\t\t\t\t...user,\n\t\t\t\tpassword: e.target.value\n\t\t\t}\n    );\n  };\n\n  const handleChangePasswordConfirmation = (e) => {\n    setUser(\n\t\t\t{\n\t\t\t\t...user,\n\t\t\t\tpasswordConfirmation: e.target.value\n\t\t\t}\n    );\n  };\n\n  const handleChangeLanguage = (e) => {\n    setUser(\n      {\n        ...user,\n        languageId: e.target.value\n      }\n    );\n  };\n\n  \n  const handleClickUpdate = (columnNames) => {\n    const userParams = columnNames.reduce((beforeResult, columnName) => {\n      beforeResult[`${columnName}`] = user[columnName]\n      return beforeResult\n    }, {})\n    axios.patch(`/users`, {\n      session: session, \n      user: userParams\n    })\n  }\n\n  return(\n    <>\n      <form onSubmit={handleSubmit}>\n      <h2>本人確認</h2>\n      <label>メールアドレス：</label>\n        <input type=\"text\"\n          name=\"email\"\n          onChange={handleChangeEmail}\n        />\n        <button onClick={handleClickUpdate(\"email\")}>変更する</button>\n\n        <br/>\n\n        <label>パスワード：</label>\n        <input type=\"text\"\n          name=\"password\"\n          type=\"password\"\n          onChange={handle}\n        />\n\n        <label>変更後メールアドレス：</label>\n        <input type=\"text\"\n          name=\"email\"\n          onChange={handleChangeEmail}\n        />\n        <button onClick={handleClickUpdate(\"email\")}>変更する</button>\n\n        <br/>\n\n        <label>変更後パスワード：</label>\n        <input type=\"text\"\n          name=\"password\"\n          type=\"password\"\n          onChange={handleChangePassword}\n        />\n        \n        <br/>\n\n        <label>パスワード確認用：</label>\n        <input type=\"text\"\n          name=\"password_confirmation\"\n          type=\"password\"\n          onChange={handleChangePasswordConfirmation}\n        />\n        <button onClick={handleClickUpdate(\"password\")}>変更する</button>\n\n\n        <br/>\n\n        <label>言語選択：</label>\n        <select onChange={handleChangeLanguage}>\n          {languages.map(language => \n            <option key={language.id} value={language.id} selected={auth.currentUser.language_id === language.id ? true : false}>\n              {language.name}\n            </option>)\n          }\n        </select>\n        <button onClick={handleClickUpdate(\"languageId\")}>変更する</button>\n\n      </form>\n    </>\n  )\n}\nexport default UserEdit;"]},"metadata":{},"sourceType":"module"}